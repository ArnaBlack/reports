<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Css-анимации. Изнутри браузера</title>
	<meta charset="utf-8"/>
	<meta
			name="viewport"
			content="width=device-width, initial-scale=1, viewport-fit=cover"
	/>
	<link rel="stylesheet" href="../../src/shower/styles/styles.css"/>
	<link rel="stylesheet" href="../../src/highlight/styles/base16/hardcore.min.css">
	<link rel="stylesheet" href="./styles.css"/>
	<style>
		.shower {
			--slide-ratio: calc(16 / 9);
		}
	</style>
</head>
<body class="shower list">
<style>
	.slide.flex-container {
		display: flex;
		flex-direction: column;
		justify-content: center;
		padding-left: 0;
		padding-right: 0;
	}
	
	.slide .static-title {
		position: static;
		font-size: 1.15em;
	}
	
	.table-title {
		color: #fb8;
		background: none;
		text-align: center;
	}
	
	.table {
		display: grid;
		grid-auto-flow: column;
		width: 100%;
		text-align: center;
	}
	
	.table ul > li:lang(ru)::before {
		content: none;
	}
</style>
<header class="caption">
	<h1>Бросаем якорь. Новая эра нативных тултипов и поповеров
	</h1>
	<p>Расторгуева Анна</p>
</header>
<!--1 intro -->
<section class="slide" id="cover">
	<h2 class="title">
		Бросаем якорь. <br/>
		<p class="accent-text">Новая эра <br /> нативных тултипов <br /> и поповеров</p>
	</h2>
	<p>Расторгуева Анна</p>
	<figure>
		<img class="cover" src="pictures/hero.webp" alt="Папай"/>
	</figure>
	<style>
		#cover h2 {
			font-size: 2.5em;
		}
	</style>
</section>
<!-- 2 about -->
<section class="slide">
	<h2 class="title">О себе</h2>
	<ul>
		<li>Фронтенд-разработчик из Сбера</li>
		<li>В профессии с 2019 г.</li>
		<li>Люблю котиков</li>
		<li>Люблю красивые анимашки</li>
	</ul>
	<img
			class="place bottom right"
			width="500"
			src="../../src/picture/three-cat-azh.webp"
			alt="котики"
	/>
</section>
<!-- 3 -->
<section class="slide">
	<h2 class="shout"> Как это было раньше?</h2>
</section>

<!-- 4 -->
<section class="slide">
	<video src="video/tooltip-js.mp4" autoplay muted loop playsinline class="cover width"></video>
</section>

<!--  5 popper js-->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/popper.webp"/>
	</figure>
	<a class="copyright" href="https://popper.js.org/docs/v2/">Popper js</a>
</section>
<!--    4 -->
<section class="slide">
	<h2 class="shout"> CSS Anchor Positioning API</h2>
</section>
<!--  5 -->
<section class="slide slide--center">
	<h2>Anchor</h2>
	<p>Элемент-ориентир. К нему привязываются другие</p>
	<p>
		<code>
			<span class="hljs-attribute">anchor-name:</span> <span class="hljs-attr">--my-anchor</span>;
		</code>
	</p>
</section>
<!-- 6 -->
<section class="slide slide--center">
	<h2>Target</h2>
	<p>Абсолютно позиционированный элемент, который нужно разместить</p>
	<p>
		<code>
			<span class="hljs-attribute">position:</span> absolute;<br/>
			<span class="hljs-comment">/*(Привязываем цель к якорю)*/</span><br/>
			<span class="hljs-attribute">position-anchor:</span> <span class="hljs-attr">--my-anchor</span>;
		</code>
	</p>
</section>
<!-- 7 -->
<section class="slide">
	<pre class="place big">
			<code  style="margin-left: calc(var(--slide-side) * -2.5);">
				&lt;div class="anchor"&gt;anchor&lt;/div&gt; <br/>
				&lt;div class="target">target&lt;/div&gt;
			</code>
		</pre>
</section>
<!-- 8 -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/anchor-target.webp" alt="anchor target"/>
	</figure>
	<div class="place center right">
		<pre>
			<code class="right-side">
				.anchor {
  					anchor-name: <span class="hljs-var">--my-anchor</span>;
				}
				.target {
				  position: absolute;
				  position-anchor: <span class="hljs-var">--my-anchor</span>;
				}
			</code>
		</pre>
	</div>
</section>
<!--  9 -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Сетка позиций</p> <code><span class="hljs-attribute">position-area</span></code><br/></h2>
	<style>
		p.subtitle {
			margin-bottom: 0.4em;
		}
	</style>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position-area" target="_blank">MDN</a>
</section>

<!--  10 -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/grid.webp" alt="anchor position grid"/>
	</figure>
</section>

<!--  11 -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/top-right.webp" alt="anchor position top right"/>
	</figure>
	
	<pre class="place right center">
		<code class="right-side text-23">
			.target {
			   position-area: top right;
			   /* или */
			   position-area: start end;
			}
		</code>
	</pre>
	<style>
		.text-23 {
			font-size: 23px;
		}
	</style>
</section>

<!--  12 -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/center-right.webp" alt="anchor position right center"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-23">
			.target {
			   position-area: center right;
			   /* или */
			   position-area: start center;
			}
		</code>
	</pre>
	<style>
		.slide-right-code pre {
			width: 59%;
		}
	</style>
</section>

<!--  13 -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/span.webp" alt="anchor position span"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-23">
			.target {
			   position-area: span-top left;
			   /* или */
			   position-area: span-start start;
			}
		</code>
	</pre>
</section>

<!--  14 -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/span-all.webp" alt="anchor position span-all"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-23">
			.target {
			   position-area: bottom span-all;
			   /* или */
			   position-area: end span-all;
			}
		</code>
	</pre>
</section>
<!--  15 all position -->
<section class="slide">
	<video src="./video/position-area.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://chrome.dev/anchor-tool/" target="_blank">
		position area
	</a>
</section>
<!--  16 position visibility -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Контроль видимости</p> <code><span
			class="hljs-attribute">position-visibility</span></code><br/></h2>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position-visibility" target="_blank">MDN</a>
</section>
<!--  17 always-->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/always.webp" alt="anchor visibility always"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-22">
			.target {
			   position-visibility: always;
			}
		</code>
	</pre>
	<style>
		.text-22 {
			font-size: 22px;
		}
		
		.slide-right-code pre {
			width: 62%;
		}
	</style>
</section>
<!--  18 always video-->
<section class="slide">
	<video src="./video/always.mp4" autoplay muted loop playsinline class="cover width"></video>
</section>
<!--  18 anchors-visible-->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/anchors-visible.webp" alt="anchor visibility anchors-visible"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-22">
			.target {
			   position-visibility: anchors-visible;
			}
		</code>
	</pre>
</section>

<!--  19 anchors-visible video-->
<section class="slide">
	<video src="./video/achors-visible.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://codepen.io/arnablack-the-vuer/pen/vENPzOw" target="_blank">
		CodePen
	</a>
</section>

<!--  20 anchors-visible video hack-->
<section class="slide">
	<video src="./video/anchors-visible-hack.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://codepen.io/arnablack-the-vuer/pen/XJmGPmE" target="_blank">
		CodePen
	</a>
</section>

<!--  21 no-overflow -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/no-overflow.webp" alt="anchor visibility no-overflow"/>
	</figure>
	<pre class="place center right">
		<code class="right-side text-22">
			.target {
			   position-visibility: no-overflow;
			}
		</code>
	</pre>
</section>

<!--  22 no-overflow video-->
<section class="slide">
	<video src="./video/no-overflow.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://codepen.io/arnablack-the-vuer/pen/qEOvyXp" target="_blank">
		CodePen
	</a>
</section>

<!--  20 position-try-fallbacks tooltip -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/tooltip-without-flip.webp"/>
	</figure>
</section>

<!--  21 position-try-fallbacks tooltip flip -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/tooltip-flip.webp"/>
	</figure>
</section>

<!--  22 position-try-* -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Умные fallbacks:</p> <code><span class="hljs-attribute">position-try-*</span></code><br/></h2>
</section>

<!-- 23 position-try-fallbacks exp-->
<section class="slide">
	<pre class="place big css">
			<code>
				.target {
					position-try-fallbacks: --my-custom-position,
					--my-custom-position flip-block,
					bottom left;
				}
			</code>
		</pre>
</section>
<!--  24 position-try-fallbacks-->
<section class="slide flex-container">
	<h2 class="shout" style="font-size: 28px; line-height: 2.5">
		<code>
			position-try-fallbacks: <br/><span class="hljs-keyword">&lt;dashed-ident&gt; <br/>|| &lt;try-tactic&gt; <br/>| &lt;"position-area"&gt;</span>
		</code>
	</h2>
	</div>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position-try-fallbacks" target="_blank">MDN</a>
</section>
<!-- 25 position-try-fallbacks try-tactic-->
<section class="slide">
	<pre class="place big css">
			<code>
				.target {
					/*dashed-ident*/
					position-try-fallbacks: --my-custom-position;
				}
			</code>
		</pre>
</section>

<!-- 26 position-try-fallbacks dashed-ident-->
<section class="slide">
	<pre class="place big css">
			<code>
				.target {
					/*try-tactic*/
					position-try-fallbacks: flip-block;
				}
			</code>
		</pre>
</section>
<!--  27 position-try-fallbacks block -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/try-fallbacks-flip-block.webp"/>
	</figure>
</section>
<!--  28 position-try-fallbacks block -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/try-fallbacks-flip-inline.webp"/>
	</figure>
</section>
<!--  29 position-try-fallbacks start -->
<section class="slide">
	<figure>
		<img class="cover" src="./pictures/try-fallbacks-flip-start.webp"/>
	</figure>
</section>
<!-- 30 position-try-fallbacks position-area-->
<section class="slide">
	<pre class="place big css">
			<code>
				.target {
					/*position-area*/
					position-try-fallbacks: bottom left;
				}
			</code>
		</pre>
</section>

<!--  31 flip-block video-->
<section class="slide">
	<video src="./video/flip-block.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://ishadeed.com/article/anchor-positioning/" target="_blank">
		Источник
	</a>
</section>

<!--  31 try order-->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/try-order.webp" alt="anchor try order"/>
	</figure>
	<div class="place center right" style="padding-right: 20%;">
		<code class="right-side" style="font-size: 22px">
			<span class="hljs-attribute">position-try-order</span>: <br/>normal | <br/>most-width | <br/>most-height | <br/>
			most-block-size | <br/>most-inline-size
		</code>
	</div><a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position-try-order" target="_blank">MDN</a>
</section>

<!--  32 Кастомные fallbacks -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Кастомные fallbacks </p> <code><span class="hljs-attribute">@position-try</span></code><br/>
	</h2>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@position-try" target="_blank">MDN</a>
</section>

<!--  33 Кастомные fallbacks -->
<section class="slide">
<pre class="place big css">
          <code>
          @position-try &lt;dashed-ident&gt; {
			  &lt;declaration-list&gt;
			}
          </code>
        </pre>
</section>
<!--  34 Кастомные fallbacks -->
<section class="slide">
<pre class="place big css" style="font-size: 22px">
          <code>
			@position-try --my-custom-position {
  			  position-area: top left;
			  width: 100px;
			}
          </code>
        </pre>
</section>
<!--  35 Кастомные fallbacks -->
<section class="slide">
<pre class="place big css" style="font-size: 22px">
          <code>
         .target {
			  position: absolute;
			  position-area: top right;
			  position-try-fallbacks: --my-custom-position, bottom left;
			  position-try-order: most-width;
			  width: 150px;
			}
          </code>
        </pre>
</section>

<!--  31 @position-try video-->
<section class="slide">
	<video src="./video/position-try.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://codepen.io/arnablack-the-vuer/pen/zxvbypm" target="_blank">
		CodePen
	</a>
</section>

<!--  35 Кастомные fallbacks declaration-list-->
<section class="slide">
	<h2>declaration-list</h2>
	<div class="columns two">
		<ul>
			<li>position-area</li>
			<li>anchor()</li>
			<li>position-anchor</li>
			<li>anchor-size()</li>
			<li>anchor-center для align-self и justify-self</li>
		</ul>
		<ul>
			<li>Inset property</li>
			<li>Margin property</li>
			<li>Sizing property</li>
		</ul>
	</div>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@position-try#descriptors" target="_blank">MDN</a>
</section>

<!--  36 func anchor -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Функция</p> <code><span class="hljs-attribute">anchor()</span></code>
	</h2>
</section>

<!--  37 func anchor -->
<section class="slide flex-container">
	<h2 class="shout anchor">
		<code>
			anchor(<span class="hljs-keyword"><br/>&lt;anchor-name&gt;<br/> &lt;anchor-side&gt;,<br/> &lt;length-percentage&gt;</span>)
		</code>
	</h2>
	<a class="copyright" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/CSS/anchor">css anchor()</a>
	<style>
		.slide .anchor {
			font-size: 2em;
			line-height: 1.5;
		}
	</style>
</section>

<!--  38  anchor name -->
<section class="slide">
         <pre class="place big css">
          <code>
            /* Define an anchor element */
          .anchor {
            anchor-name: --my-anchor;
          }
          </code>
        </pre>
</section>

<!--  39  anchor name -->
<section class="slide">
         <pre class="place big css">
          <code>

          /* Anchor a target element */
          .target {
            position: absolute;
            left: anchor(--my-anchor left, 0);
          }
          </code>
        </pre>
</section>

<!-- 40 anchor-center-physical-arguments-->
<section class="slide finish">
	<figure>
		<img class="cover" src="./pictures/anchor-physical-side-arguments.webp"/>
	</figure>
</section>

<!-- 39 anchor-center-physical-arguments-->
<section class="slide finish">
	<figure>
		<img class="cover" src="./pictures/anchor-center-physical-arguments.webp"/>
	</figure>
</section>

<!-- 40 anchor-logical-->
<section class="slide finish">
	<figure>
		<img class="cover" src="./pictures/logical-side.webp"/>
	</figure>
</section>

<!-- 41 anchor-logical-->
<section class="slide finish">
	<figure>
		<img class="cover" src="./pictures/logical.webp"/>
	</figure>
</section>

<!-- 42 anchor-length-->
<section class="slide finish">
	<figure>
		<img class="cover" src="./pictures/anchor-length.webp" alt="anchor length"/>
	</figure>
</section>
<!-- 43 two anchor -->
<section class="slide">
	<video src="./video/two-anchor.mp4" autoplay muted loop playsinline class="cover width"></video>
	<a class="copyright" href="https://codepen.io/arnablack-the-vuer/pen/XJmGdRW" target="_blank">
		CodePen
	</a>
</section>
<!--  44 func anchor-size -->
<section class="slide">
	<h2 class="shout"><p class="subtitle">Функция</p> <code><span class="hljs-attribute">anchor-size()</span></code>
	</h2>
</section>

<!--  45 func anchor-size -->
<section class="slide flex-container">
	<h2 class="shout anchor">
		<code>
			anchor-size(<span class="hljs-keyword"><br/>[ &lt;anchor-element&gt; <br/>|| &lt;anchor-size&gt; ],<br/> <span class="hljs-selector-class">&lt;length-percentage&gt;</span></span>)
		</code>
	</h2>
	<a class="copyright" href="https://developer.mozilla.org/en-US/docs/Web/CSS/anchor-size" target="_blank">
		anchor-size()
	</a>
</section>

<!--  46 anchor-element -->
<section class="slide flex-container">
	<h2 class="shout" style="line-height: 1.5">
		anchor-element <br />
		<code><span class="hljs-keyword">--other-anchor</span></code>
	</h2>
</section>

<!--  47 anchor-size -->
<section class="slide slide-right-code">
	<figure>
		<img class="cover" src="./pictures/anchor-size.webp"/>
	</figure>
	<div class="place center right" style="padding-right: 20%;">
		<code class="right-side" style="font-size: 22px">
			<span class="hljs-attribute">anchor-size</span>: <br/>block | <br/>inline | <br/>width | <br/>
			height | <br/>self-block  | <br/>self-inline | <br/> и другие
		</code>
	</div>
</section>

<!--  32 func anchor-size exemple -->
<section class="slide">
         <pre class="place big css">
          <code>
           .target {
			  /* uses default anchor */
			  width: anchor-size(width, 20%);
			  height: anchor-size(--other-anchor inline-size, 100px);
			}
          </code>
        </pre>
</section>

<!--  33 supports -->
<section class="slide">
	<h2 class="shout">А что с поддержкой?</h2>
</section>

<!--  34 supports -->
<section class="slide">
	<h2>Поддержка</h2>
	<ul>
		<li><span class="hljs-keyword">anchor-name</span> Chrome <span class="hljs-attr">125+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span> </li>
		<li><span class="hljs-keyword">anchor-position</span> Chrome <span class="hljs-attr">125+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span> </li>
		<li><span class="hljs-keyword">position-visibility</span> Chrome <span class="hljs-attr">125+</span> </li>
		<li><span class="hljs-keyword">position-try-fallbacks</span> Chrome <span class="hljs-attr">128+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span> </li>
		<li><span class="hljs-keyword">position-try-order</span> Chrome <span class="hljs-attr">125+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span> </li>
		<li><span class="hljs-keyword">@position-try</span> Chrome <span class="hljs-attr">125+</span> </li>
		<li><span class="hljs-keyword">anchor()</span> Chrome <span class="hljs-attr">125+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span>  </li>
		<li><span class="hljs-keyword">anchor-size()</span> Chrome <span class="hljs-attr">125+</span>, Safari <span class="hljs-attr">26<sup>*</sup></span>  </li>
	</ul>
	<p class="note"><sup>*</sup> - Preview browser support</p>
</section>
<!--  35 supports -->
<section class="slide">
	<h2>Итоги и выводы Anchor Position API</h2>
	<ul>
		<li>
			<b class="accent-text">Что это?</b> <br />Мощнейший API для позиционирования на чистом CSS
		</li>
		<li>
			<b class="accent-text">Что решает?</b> <br />Избавляет от тонн хрупкого JS-кода для поповеров, тултипов, меню
		</li>
		<li>
			<b class="accent-text">В чем преимущество? </b> <br />Производительность, надежность, декларативность
		</li>
		<li>
			<b class="accent-text">Когда использовать?</b> <br />Уже сейчас для прогрессивного улучшения в Chrome.<br /> В будущем — как стандартный подход
		</li>
	</ul>
</section>

<!-- что еще почитать -->
<section class="slide">
	<h2 class="title">Полезные ссылки</h2>
	<ul>
		<li>
			<a href="https://developer.chrome.com/blog/anchor-positioning-api"
			   target="_blank">Introducing the CSS anchor positioning API</a>
		</li>
		<li>
			<a href="https://developer.chrome.com/docs/css-ui/anchor-positioning-api"
			   target="_blank">The CSS anchor positioning API</a>
		</li>
		<li>
			<a href="https://ishadeed.com/article/anchor-positioning/"
			   target="_blank">The Basics of Anchor Positioning</a>
		</li>
		<li>
			<a href="https://github.com/oddbird/css-anchor-positioning"
			   target="_blank">Polyfill for CSS Anchor Positioning</a>
		</li>
		<li>
			<a href="https://frontendmasters.com/blog/custom-range-slider-using-anchor-positioning-scroll-driven-animations/"
			   target="_blank">Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations</a>
		</li>
		<li>
			<a href="https://web-standards.ru/"
			   target="_blank">Подкаст "Веб-стандарты"</a>
		</li>
	</ul>
</section>
<!-- finish -->
<section class="slide finish">
	<h2 class="title">
		Всем спасибо!
		<br/>Fin
	</h2>
	<figure>
		<img class="cover" src="../../src/picture/heart-cats.webp" alt="cats"/>
		<img
				class="place bottom right"
				width="150"
				src="./pictures/qr.webp"
				alt="qr"
		/>
	</figure>
	<style>
		.finish h2 {
			margin-top: 150px;
			color: white;
			text-align: center;
			font-size: 70px;
			text-shadow: 0 0 6px #000;
		}
	</style>
</section>
<script src="../../src/shower/shower.js"></script>
<script src="../../src/highlight/highlight.min.js"></script>
<script src="../../src/highlight/languages/css.js"></script>
<script src="../../src/highlight/languages/xml.js"></script>
<script>hljs.highlightAll();</script>
<script>
	(function () {
		var mouseTimer = null, cursorVisible = true;
		
		function disappearCursor() {
			mouseTimer = null;
			document.body.style.cursor = "none";
			cursorVisible = false;
		}
		
		document.onmousemove = function () {
			if (mouseTimer) {
				window.clearTimeout(mouseTimer);
			}
			if (!cursorVisible) {
				document.body.style.cursor = "default";
				cursorVisible = true;
			}
			mouseTimer = window.setTimeout(disappearCursor, 3000);
		};
	})();
</script>
<script>
	document.querySelectorAll('video').forEach(video => {
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					// Видео в viewport - воспроизводим с начала
					video.currentTime = 0;
					video.play();
				} else {
					// Видео вне viewport - приостанавливаем
					video.pause();
				}
			});
		}, {
			threshold: 0.5
		});
		
		observer.observe(video);
	});
</script>
</body>
</html>

<!--todo-->
<!--demo tooltip with js-->
<!--add slide popover js?-->
<!--demo position-try-order-->
<!--demo anchor-size-->
<!--demo anchor + popover + popover target-->